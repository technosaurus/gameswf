2005-04-10  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_test_ogl.cpp (main): Add -d option to supply a
	different value for SDL_Delay() in the main loop.

2005-04-08  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_xml.cpp (setupStackFrames): delete the XML
	parsed data after setting up the stack frames.
	* gameswf/gameswf_movie.cpp: Make sure the files exist, and is a
	valid JPEG before trying to read it.

2005-04-06  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_movie.cpp: New data structure to hold MCL data
	for GetProgress().

2005-04-03  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_xml.cpp (setupStackFrames): Grab nodeValue for
	all elements if there is any.
	* gameswf/gameswf_action.cpp (MATH_WRAP_FUNC): Return an
	as_value.
	(call_method) Needs to check if the method is a NUMBER.
	* gameswf/gameswf_xml.cpp (extractNode): Add some filtering of
	bogus data content (just a CR) that seems to be creeping in from
	libxml. This gets rid of the extraneous "undefined" fields. Free
	the pointer after calling xmlParseFile.

	* gameswf/gameswf_xml.cpp: Free xml doc pointer after parsing.
	
2005-04-02  Rob Savoye  <rob@bertha.welcomehome.org>

	* configure.ac: Add --disable-xml option to not look for XML or
	use the XML and XMLSocket AS objects. The default is to support
	XML, since it's part of SWF v6.
	* configure: Regenerated.
	* gameswf/gameswf_test_ogl.cpp (main): Ad "-c" option to turn off
	SDL Parachutes, because sometimes we want the core file for
	debugging.
	* gameswf/gameswf_action.cpp: Remove object creation code for new
	AS objects.
	* gameswf/gameswf_xml.cpp (xml_new): Move code from
	gameswf_action.cpp to here so we create new objects correctly using
	constructors.
	* gameswf/gameswf_string.cpp (string_new): Move code from
	gameswf_action.cpp to here so we create new objects correctly using
	constructors.
	* gameswf/gameswf_movie.cpp (moviecliploader_new): Move code from
	gameswf_action.cpp to here so we create new objects correctly using
	constructors.
	* gameswf/gameswf_xmlsocket.cpp (xmlsocket_new):  Move code from
	gameswf_action.cpp to here so we create new objects correctly using
	constructors.
	* gameswf/gameswf_*: Don't use __PRETTY_FUNCTION__, it's GCC
	specific. Instead use __FUNCTION__, which supported with VC++..

2005-04-01  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_test_ogl.cpp (key_event): Add trapping ENTER and
	ESCAPE too. These supposedly get turned on by an
	fscommand('trapallkeys', true) somehow.
	* gameswf/gameswf_xml.cpp (xml_load): Don't try to open an XML
	disk file that doesn't exist, or the path is wrong.
	* gameswf/gameswf_xml.cpp: Fix attribute parsing so it works for
	all levels of the XML data.

2005-03-28  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_xml.cpp: Process XML messages one level
	deeper. Properly setup stack so firstChild.firstChild.nodeValue
	actually works.

2005-03-26  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_xmlsocket.cpp (anydata): Read as much data as
	there is on the socket. Break up the data into seperate messages,
	and store them in a queue.
	(xmlsocket_event_ondata): Process all the messages in the message
	queue before reading more messages. Call onData callback on all
	messages without returning. 
	
2005-03-25  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/Makefile.in: Add optional pthreads support. (currently
	unused)
	* gameswf/gameswf_xmlsocket.h: Add prototype for pthread entry
	point. (currently unused)
	* gameswf/gameswf_xmlsocket.cpp: Add pthread entry point that
	reads the socket. (currently unused)

	* gameswf/gameswf_impl.cpp: Check for socket data every time
	through the advance loop. Don't use an interupt handler, it's
	orders of magnitude too slow.
	* gameswf/gameswf_xmlsocket.cpp: Reduce by a huge amount the
	select timeout.


2005-03-24  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_xml.cpp (extractNode): New method to recursively
	parse XML data. Make _nodes a pointer.
	* gameswf/gameswf_xmlsocket.cpp: Add a NULL when sending XML
	messages, and don't strip off the NULL when reading XML messages.
	* gameswf/gameswf_textfield.{cpp,h}: Remove as unnecessary.
	* gameswf/Makefile.in: Don't build gameswf_textfield, we don't
	need it.
	* gameswf/gameswf_textformat.cpp: Add minimal support for all
	forms of setTextFormat.

2005-03-23  Rob Savoye  <rob@bertha.welcomehome.org>

	* configure.ac: Don't try to configure the empty testsuite
	directory.
	* configure: Regenerated.

2005-03-20  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/gameswf_movie.{cpp,h}: Add gameswf namespace. 
	* gameswf/gameswf_string.{cpp,h}: Add gameswf namespace. 
	* gameswf/gameswf_textfield.{cpp,h}: Add gameswf namespace. 
	* gameswf/gameswf_textformat.{cpp,h}: Add gameswf namespace.
	Rename TextFormat to text_format.
	* gameswf/gameswf_timers.cpp (Timer::start): Don't cast the double
	to a time_t.
	* macros/libXML.m4: Define HAVE_LIBXML if libxml2 is found.
	* configure.ac: Add AM_CONFIG_HEADER. Don't both to link to my
	test XML file.
	* config.h.in: Add autoheader generated config file.
	* config.mk: Add DEFS to CFLAGS so HAVE_CONFIG_H gets passed to
	G++.
	* base/Makefile.in: Add dependencies.
	* aclocal.m4: Regenerated using aclocal
	* autogen.sh: Regenerate aclocal.m4, config.h.in, and configure
	without having to understand the GNU auto tools.
	* tu_opengl_includes.h: Don't redefine APIENTRY if it exists.
	* gameswf_action.cpp: Include config.h if HAVE_CONFIG_H is
	defined. Only include gameswf_xml.h and gameswf_xmlsocket.h if
	HAVE_LIBXML is defined in config.h. Eliminate compiler
	warnings. Use HAVE_LIBXML instead of TU_CONFIG_LINK_TO_LIBXML.
	* gameswf_xml.cpp: Include config.h if HAVE_CONFIG_H is
	defined. Don't use any of this code unless HAVE_LIBXML is defined
	in config.h. Add gameswf namespace. Use HAVE_LIBXML instead of
	TU_CONFIG_LINK_TO_LIBXML.
	* gameswf_xml.h: Include config.h if HAVE_CONFIG_H is
	defined. Don't use any of this code unless HAVE_LIBXML is defined
	in config.h. Use HAVE_LIBXML instead of TU_CONFIG_LINK_TO_LIBXML.
	* gameswf_xmlsocket.cpp: Include config.h if HAVE_CONFIG_H is
	defined. Don't use any of this code unless HAVE_LIBXML is defined
	in config.h. Add gameswf namespace. Use HAVE_LIBXML instead of
	TU_CONFIG_LINK_TO_LIBXML. 
	* gameswf_xmlsocket.h: Include config.h if HAVE_CONFIG_H is
	defined. Don't use any of this code unless HAVE_LIBXML is defined
	in config.h. Use HAVE_LIBXML instead of TU_CONFIG_LINK_TO_LIBXML.
	
2005-03-19  Rob Savoye  <rob@bertha.welcomehome.org>

	* gameswf/Makefile.in: Update dependencies for new files.

	* gameswf/gameswf_action.cpp: Add a few debugging statements so we
	can track Text objects by their address. Add initial support for
	the TextField::_visible and TextField::_width properties. Add
	callback for XML::loaded().
	* gameswf/gameswf_impl.cpp: Remove interval timer from array on a
	clearInterval() command. Use our own stack when calling AS
	functions from do_something() so they have the local variables
	propogated into this call frame.
	* gameswf/gameswf_timers.cpp: Propogate local variables into the
	child function's stack frame since it's supposed to inherit these
	values. There has got to be a better way to do this...
	* gameswf/gameswf_xmlsocket.cpp: Don't pass additional arguments
	to onConnect().

2005-03-17  Rob Savoye  <rob@bertha.welcomehome.org>

	* macros/libXML.m4: New. Look for libxml2 directories.
	* base/container.{cpp,h}: memset buffer so tu_string prints better in
	GDB.
	* base/triangulate_impl.h: Use  compiler_assert(0) rather than
	COMPILER_ASSERT(0).
	* base/tu_timer.cpp: Add Linux imnplementations of get_profile_ticks()
	and profile_ticks_to_seconds().
	* configure.ac: Look for XML2 directories. Configure a Makefile in
	the testsuite directory.
	* configure: regenerate.
	* gameswf/Makefile: Add new files, gameswf_xml, gameswf_movie,
	gameswf_xmlsocket, gameswf_string.
	* gameswf/gameswf_xml.{cpp,h}: New files for XML ActionScript support.
	* gameswf/gameswf_xmlsocket.{cpp,h}: New files for XMLSocket
	ActionScript support.
	* gameswf/gameswf_timers.{cpp,h}: New files for setInterval
	ActionScript support.	
	* gameswf/gameswf_movie.{cpp,h}: New files for MovieClipLoader
	ActionScript support.
	* gameswf/gameswf_string.{cpp,h}: New files for a more complete
	String ActionScript implementation.
	* gameswf/gameswf_textfield.{cpp,h}: New files for TextField
	ActionScript support.
	* gameswf/gameswf_textformat.{cpp,h}: New files for TextFormat
	ActionScript support.
	* gameswf.h: Add add_interval_timer() and void clear_interval_timer().
	* gameswf/gameswf_action.cpp: Include gameswf_string.h,
	gameswf_xml.h, gameswf_xmlsocket.h, gameswf_movie.h,
	gameswf_timers.h, gameswf_textformat.h, gameswf_textfield.h. Add
	support for new ActionScripts, XML, XMLSocket, TextField,
	TextFormat, and MovieClipLoader.
	* gameswf/gameswf_action.h: Move event_id to here. 
	* gameswf/gameswf_impl.{cpp,h}: Include gameswf_timers.h. Add support
	for setInterval. 

