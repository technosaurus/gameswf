# Makefile for tu-testbed/engine library


include ../config

ifeq ($(TU_TESTBED_COMPILER), gcc)
SDL_CFLAGS := $(shell sdl-config --cflags)
SDL_LDFLAGS := $(shell sdl-config --libs)
endif

SDL_INCLUDE := SDL
LUA_INCLUDE := ../../lua-4.0/include

INCLUDE_PATHS := -I$(SDL_INCLUDE) -I$(LUA_INCLUDE) -I..

CFLAGS := $(CFLAGS) $(SDL_CFLAGS) $(INCLUDE_PATHS) $(CC_DEBUG_FLAGS)
LDFLAGS := -lGL -lGLU -lSDL_image $(SDL_LDFLAGS) $(LIB_DEBUG_FLAGS)
# -lstdc++

SRCS := config.cpp geometry.cpp cull.cpp bsp.cpp ogl.cpp
OBJS := $(SRCS:.cpp=.$(OBJ_EXT))

#%.$(OBJ_EXT) : %.cpp
#	$(CC) -c $^ $(CFLAGS)


ENGINE = engine.$(LIB_EXT)

all: $(ENGINE)

$(ENGINE): $(OBJS)
	$(AR) $(LIB_OUT_FLAG)$(ENGINE) $(OBJS)

clean:
	rm $(ENGINE) $(OBJS)
