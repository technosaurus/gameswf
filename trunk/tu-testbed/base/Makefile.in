# Makefile for tu-testbed/base library

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = $(srcdir)

include ../config.mk


INCLUDES:= \
	$(ENGINE_INCLUDE) \
	$(LIBPNG_INCLUDE) \
	$(ZLIB_INCLUDE) \
	$(JPEGLIB_INCLUDE) \
	-I$(top_srcdir)

CPPFLAGS := $(CFLAGS) $(SDL_CFLAGS) $(INCLUDES) $(CC_DEBUG_FLAGS)
# LDFLAGS := -lGL -lGLU $(SDL_LIBS) $(LIB_DEBUG_FLAGS)
LDFLAGS := $(OPENGL_LIBS) $(GLU_LIBS) $(SDL_LIBS) $(LIB_DEBUG_FLAGS)

BASE_LIB = $(LIB_PRE)base.$(LIB_EXT)
all: $(BASE_LIB)

# Source files.
SRCS :=						\
	container.cpp				\
	dlmalloc.c				\
	config.cpp				\
	ogl.cpp					\
	image.cpp				\
	image_filters.cpp			\
	jpeg.cpp				\
	png_helper.cpp				\
	postscript.cpp				\
	triangulate_float.cpp			\
	triangulate_sint32.cpp			\
	tu_file.cpp				\
	tu_file_SDL.cpp				\
	tu_random.cpp				\
	tu_timer.cpp				\
	tu_types.cpp				\
	utf8.cpp				\
	utility.cpp				\
	zlib_adapter.cpp

OBJS := $(SRCS:.cpp=.$(OBJ_EXT))
OBJS := $(OBJS:.c=.$(OBJ_EXT))

triangulate_sint32.$(OBJ_EXT) triangulate_float.$(OBJ_EXT): triangulate_impl.h triangulate.h grid_index.h

$(BASE_LIB): $(OBJS)
	$(AR) $(AR_FLAGS) $(LIB_OUT_FLAG) $(BASE_LIB) $(OBJS)

clean:
	-@rm -f $(BASE_LIB) $(OBJS)

echo:
	echo $(OBJS)
	echo $(BASE_LIB)

# Local Variables:
# tab-width: 8
# indent-tabs-mode: t
# End:
